<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>เว็บจัดการรายการของขวัญภายในงาน DPU OPH 2025</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>
      <h1>ตัวจัดการของรางวัล 3 วัน</h1>
      <div class="muted">
        เลือก “วันปัจจุบัน” แล้วกด + / − หรือกรอกจำนวนหลายชิ้นได้ ข้อมูลถูกบันทึกอัตโนมัติ
      </div>
    </header>

    <main class="container">
      <section class="card">
        <div class="toolbar">
          <span class="muted">วันปัจจุบัน:</span>
          <div id="dayPills">
            <button class="pill" data-day="1">วันที&nbsp;1</button>
            <button class="pill" data-day="2">วันที&nbsp;2</button>
            <button class="pill" data-day="3">วันที&nbsp;3</button>
          </div>

          <span class="muted">|</span>
          <button id="saveBtn" class="btn-accent">บันทึกตอนนี้</button>
          <button id="exportBtn">ส่งออก CSV</button>
          <button id="resetBtn" class="btn-warn">รีเซ็ตกลับค่าเริ่มต้น</button>
          <span class="muted" id="saveHint"></span>
          <span class="muted" id="lastUpdated"></span>
        </div>

        <div class="wrap">
          <table id="tbl" aria-describedby="saveHint">
            <thead>
              <tr>
                <th class="name" scope="col" title="ชื่อของรางวัล">ชื่อของรางวัล</th>
                <th class="qty" scope="col" title="เริ่มต้น">เริ่มต้น</th>
                <th class="qty" scope="col" title="วัน1">วัน1</th>
                <th class="qty" scope="col" title="วัน2">วัน2</th>
                <th class="qty" scope="col" title="วัน3">วัน3</th>
                <th class="qty" scope="col" title="แจกรวม">แจกรวม</th>
                <th class="qty" scope="col" title="คงเหลือ">คงเหลือ</th>
                <th class="tight" scope="col" title="จัดการ">จัดการ</th>
              </tr>
            </thead>
            <tbody id="body"></tbody>
          </table>
        </div>

        <div class="foot">
          <span class="tag">✓ บันทึกอัตโนมัติทุกครั้งที่แก้ไข</span>
        </div>
      </section>
    </main>

    <!-- Firebase (สำหรับเว็บ static / GitHub Pages) -->
    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-database-compat.js"></script>
    <script>
      // ตั้งค่า Firebase ของโปรเจกต์เธอ
      const firebaseConfig = {
        apiKey: "AIzaSyBIpSGwHMPOBKk4oFtfjJo5WtEFGS1rOmE",
        authDomain: "gift-manage-dpu-oph.firebaseapp.com",
        databaseURL: "https://gift-manage-dpu-oph-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "gift-manage-dpu-oph",
        storageBucket: "gift-manage-dpu-oph.firebasestorage.app",
        messagingSenderId: "289488711879",
        appId: "1:289488711879:web:01253e63cf7c4012034ee2",
        measurementId: "G-5FQJ5VX43P"
      };

      // เริ่มต้น Firebase
      firebase.initializeApp(firebaseConfig);

      // สร้างตัวอ้างอิงไปยัง Realtime Database (path oph2025/inventory)
      window.DB_REF = firebase.database().ref("oph2025/inventory");
    </script>
    <script src="script.js"></script>
  </body>
</html>
